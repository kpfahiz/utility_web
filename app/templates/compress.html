{% extends "base.html" %}

{% block title %}Compress Image Online - Reduce Page Load Times | Utility WebApp{% endblock %}

{% block meta_description %}Compress JPEG and PNG images for free without losing quality. Our intelligent compression
tool helps you reduce file sizes and optimize images for the web.{% endblock %}

{% block content %}
<h1 class="mb-4 h2">üìÑ Compress Your PDF</h1>
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card shadow-sm mb-5">
      <div class="card-header bg-primary text-white text-center">
        <h1 class="h4 mb-0">Image Compression Tool</h1>
      </div>
      <div class="card-body">
        {% if compressed %}
        <div class="alert alert-success mb-4 border-success-subtle">
          <h5 class="alert-heading fw-bold">‚úÖ Compression Successful!</h5>
          <hr>
          <div class="row">
            <div class="col-md-6">
              <p class="mb-1"><strong>Original Size:</strong>
                {% if original_size_mb >= 1 %}
                {{ "%.2f"|format(original_size_mb) }} MB
                {% else %}
                {{ "%.2f"|format(original_size_kb) }} KB
                {% endif %}
              </p>
              <p class="mb-1"><strong>Compressed Size:</strong>
                {% if compressed_size_mb >= 1 %}
                {{ "%.2f"|format(compressed_size_mb) }} MB
                {% else %}
                {{ "%.2f"|format(compressed_size_kb) }} KB
                {% endif %}
              </p>
              <p class="mb-0"><strong>Compression:</strong>
                <span class="badge bg-success">{{ "%.1f"|format(compression_percentage) }}% reduction</span>
              </p>
            </div>
          </div>
          <hr>
          <div class="d-flex gap-2">
            <a href="/download/{{ download_name }}" class="btn btn-success px-4" download>Download Image</a>
            <a href="/compress" class="btn btn-outline-secondary">Compress Another</a>
          </div>
        </div>
        {% endif %}

        <form method="POST" enctype="multipart/form-data" class="mb-3">
          <div class="mb-4">
            <label for="image" class="form-label fw-semibold">Select Image (JPEG/PNG)</label>
            <input type="file" class="form-control" name="image" id="image" accept="image/jpeg,image/png" required>
            <div class="form-text">Upload images up to 10MB for best results.</div>
          </div>
          <div class="mb-4">
            <label for="quality" class="form-label fw-semibold">Compression Quality: <span
                id="quality_val">30</span>%</label>
            <input type="range" class="form-range" name="quality" id="quality" value="30" min="1" max="100"
              oninput="document.getElementById('quality_val').textContent = this.value">
            <div class="form-text d-flex justify-content-between">
              <span>Higher Compression</span>
              <span>Better Quality</span>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-lg w-100 py-2">Optimize & Compress</button>
        </form>
      </div>
    </div>

    <!-- SEO Content Section -->
    <section class="mb-5">
      <h2 class="h3 fw-bold mb-4">Why Compress Your Images?</h2>
      <p class="text-muted">High-resolution images can significantly slow down your website. Our tool uses smart lossy
        compression to reduce file size while maintaining a professional visual appearance.</p>

      <div class="row g-4 mt-2">
        <div class="col-md-6">
          <div class="p-3 border rounded shadow-sm h-100">
            <h5 class="fw-bold">üöÄ Improve SEO</h5>
            <p class="small text-muted mb-0">Faster page loads lead to better search engine rankings and lower bounce
              rates.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="p-3 border rounded shadow-sm h-100">
            <h5 class="fw-bold">üì± Mobile Friendly</h5>
            <p class="small text-muted mb-0">Compressed images consume less data, providing a better experience for
              mobile users.</p>
          </div>
        </div>
      </div>

      <div class="mt-5">
        <h4 class="fw-bold mb-3">How to use:</h4>
        <ul class="text-muted">
          <li class="mb-2"><strong>Upload:</strong> Click the "Select Image" button to choose your JPEG or PNG file.
          </li>
          <li class="mb-2"><strong>Adjust Quality:</strong> Use the slider to balance file size and visual quality.
            Initial 30% is recommended for most web uses.</li>
          <li><strong>Download:</strong> Click "Optimize & Compress" and then download your lightweight image instantly.
          </li>
        </ul>
      </div>
    </section>

    <!-- Related Tools Section -->
    <hr class="my-5">
    <section class="mb-5 py-4">
      <h3 class="fw-bold mb-4 text-center">Discover More Useful Tools</h3>
      <div class="row g-3">
        <div class="col-md-4">
          <a href="/convert-image" class="card h-100 text-decoration-none hover-shadow border-0 shadow-sm">
            <div class="card-body text-center p-3">
              <span class="fs-2 mb-2 d-block" role="img" aria-label="Switch">üîÑ</span>
              <h6 class="card-title mb-0 text-dark font-heading">Image Conversion</h6>
            </div>
          </a>
        </div>
        <div class="col-md-4">
          <a href="/remove-background" class="card h-100 text-decoration-none hover-shadow border-0 shadow-sm">
            <div class="card-body text-center p-3">
              <span class="fs-2 mb-2 d-block" role="img" aria-label="Image">üñºÔ∏è</span>
              <h6 class="card-title mb-0 text-dark font-heading">Remove Background</h6>
            </div>
          </a>
        </div>
        <div class="col-md-4">
          <a href="/qr" class="card h-100 text-decoration-none hover-shadow border-0 shadow-sm">
            <div class="card-body text-center p-3">
              <span class="fs-2 mb-2 d-block" role="img" aria-label="Mobile">üì±</span>
              <h6 class="card-title mb-0 text-dark font-heading">QR Generator</h6>
            </div>
          </a>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- HowTo Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "How to Compress Images Online for Free",
  "description": "Learn how to reduce image file size without losing quality using our free online tool.",
  "step": [
    {
      "@type": "HowToStep",
      "name": "Upload Your Image",
      "text": "Select your JPEG or PNG file from your computer or mobile device.",
      "url": "{{ request.url }}"
    },
    {
      "@type": "HowToStep",
      "name": "Select Compression Quality",
      "text": "Use the slider to choose your desired balance between file size and image clarity. We recommend 30%.",
      "url": "{{ request.url }}"
    },
    {
      "@type": "HowToStep",
      "name": "Compress and Download",
      "text": "Click the Optimize & Compress button and download your lightweight image instantly.",
      "url": "{{ request.url }}"
    }
  ],
  "totalTime": "PT20S"
}
</script>
{% endblock %}